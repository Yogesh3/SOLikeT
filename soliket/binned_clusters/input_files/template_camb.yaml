# run from SOLikeT/soliket/binned_clusters
# command:
# $ cobaya-run input_files/template_camb.yaml -f


output: chains/test_camb

likelihood:
  soliket.BinnedClusterLikelihood:

    # Websky data
    data_path: data/so/
    cat_file: MFMF_WebSkyHalos_A10tSZ_3freq_tiles/MFMF_WebSkyHalos_A10tSZ_3freq_tiles_mass.fits
    Q_file: MFMF_WebSkyHalos_A10tSZ_3freq_tiles/selFn/quick_theta_Q.npz
    tile_file: MFMF_WebSkyHalos_A10tSZ_3freq_tiles/selFn/tileAreas.txt
    rms_file: MFMF_WebSkyHalos_A10tSZ_3freq_tiles/selFn/downsampled.txt

    # run options
    stop_at_error: true
    choose_theory: "camb"
    single_tile_test: "no"
    choose_dim: "1D"
    Q_optimise: "yes"
    rel_correction: "no"

    # redshift setting
    zmin: 0.
    zmax: 2.8
    dz: 0.1

    # SNR setting
    SNRcut: 5.
    log10qmin: 0.6
    log10qmax: 2.0
    dlog10q: 0.25

    # mass setting
    Mmin: 1e13
    Mmax: 1e16
    dlogM: 0.05

    # mass function
    delta: 200.

params:
  logA:
    prior:
      min: 2.
      max: 4.
    ref:
      dist: norm
      loc: 3.1
      scale: 0.001
    proposal: 0.001
    latex: \log(10^{10} A_\mathrm{s})
    drop: true
  As:
    value: 'lambda logA: 1e-10*np.exp(logA)'
    latex: A_\mathrm{s}

  theta_MC_100:
    prior:
      min: 0.5
      max: 10
    ref:
      dist: norm
      loc: 1.0411
      scale: 0.0004
    proposal: 0.0002
    latex: 100\theta_\mathrm{MC}
    drop: true
    renames: theta
  cosmomc_theta:
    value: 'lambda theta_MC_100: 1.e-2*theta_MC_100'
    derived: false

  tenToA0: 4.35e-5
  B0: 0.08
  C0: 2. # boris: why 2?
  scatter_sz: 0.
  bias_sz: 1.

  ombh2: 0.0226576  # for omb = 0.049
  omch2: 0.1206864
  ns: 0.965
  tau: 0.055
  mnu: 0.0
  nnu: 3.046
  omnuh2: 0.
  w: -1

  sigma8:
    latex: \sigma_8
  omegam:
    latex: \Omega_\mathrm{m}
  H0:
   latex: H_0

sampler:
  evaluate:
      override:
        theta_MC_100: 1.0413345 # for H0 = 68
        logA: 3.007

theory:
  camb:
    stop_at_error: true
    extra_args:
      num_massive_neutrinos: 0
      dark_energy_model: fluid
      kmax: 4.2
    # ignore_obsolete: True
