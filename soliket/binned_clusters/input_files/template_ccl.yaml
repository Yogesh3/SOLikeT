# run from SOLikeT/soliket/binned_clusters
# command:
# $ cobaya-run input_files/template_class.yaml -f
output: chains/test

likelihood:
  soliket.BinnedClusterLikelihood:

    # Websky data
    data:
      data_path: data/ACT/
      cat_file: "DR5ClusterSearch/DR5_cluster-catalog_v1.1.fits"
      Q_file: "DR5ClusterSearch/selFn/QFit.fits"
      tile_file: "DR5ClusterSearch/selFn/tileAreas.txt"
      rms_file: "DR5ClusterSearch/selFn/RMSTab.fits"

    # Theory
    theorypred:
      choose_dim: "2D"
      choose_theory: "CCL"
      rel_correction: "no"
      massfunc_mode: 'ccl'
      compl_mode: 'erf_diff'

    YM:
      Mpivot: 3e14

    # Selection function
    selfunc:
      SNRcut: 5.
      Q_optimise: "yes"
      single_tile_test: "no"
      dwnsmpl_bins: 5
      average_Q: False
      mode: 'downsample'

    binning:
      # redshift setting
      z:
        zmin: 0.
        zmax: 2.8
        dz: 0.1
      # SNR setting
      q:
        log10qmin: 0.6
        log10qmax: 2.0
        dlog10q: 0.25
      # mass setting
      M:
        Mmin: 1e13
        Mmax: 1e16
        dlogM: 0.05

    # mass definition
    delta: 200.

params:
  logA:
    prior:
      min: 2.
      max: 4.
    ref:
      dist: norm
      loc: 3.1
      scale: 0.001
    proposal: 0.001
    latex: \log(10^{10} A_\mathrm{s})
    drop: true
  A_s:
    value: 'lambda logA: 1e-10*np.exp(logA)'
    latex: A_\mathrm{s}

  tenToA0: 4.35e-5
  B0: 0.08
  C0: 2.
  scatter_sz: 0.
  bias_sz: 1.

  omega_b: 0.0226576
  omega_cdm: 0.1206864
  n_s: 0.965
  tau: 0.055
  H0: 68.

  sigma8:
    latex: \sigma_8
  Omega_m:
    latex: \Omega_\mathrm{m}

sampler:
  evaluate:
      override:
        logA: 3.007

theory:
  soliket.binned_clusters.CCL:
    transfer_function: 'boltzmann_camb'
    matter_pk: 'halofit'
    baryons_pk: 'nobaryons

stop_at_error: true
